---
title: 'OHI GoC 2024: Lasting Special Places (LSP)'
author: "*Compiled on `r date()` by `r Sys.info()['user']`*"
format:
  html:
    code-fold: show
    toc: true
    toc-depth: 3
    toc-float: true
    number-sections: false
    theme: cerulean
    highlight-style: haddock
  pdf:
    toc: true
editor: 
  markdown:
    wrap: sentence
  chunk_output_type: inline
---

# Summary

From Halpern et al. 2012 supplemental info:

> The 'Lasting Special Places' sub-goal focuses instead on those geographic locations that hold particular value for aesthetic, spiritual, cultural, recreational or existence reasons. This sub-goal is particularly hard to quantify. Ideally one would survey every community around the world to determine the top list of special places, and then assess how those locations are faring relative to a desired state (e.g., protected or well managed). The reality is that such lists do not exist. Instead, we assume areas that are protected represent these special places (i.e. the effort to protect them suggests they are important places).

> Clearly this is an imperfect assumption but in many cases it will be true. Using lists of protected areas as the catalogue of special places then creates the problem of determining a reference condition. We do not know how many special places have yet to be protected, and so we end up having all identified special places also being protected. To solve this problem we make two important assumptions. First, we assume that all countries have roughly the same percentage of their coastal waters and coastline that qualify as lasting special places. In other words, they all have the same reference target (as a percentage of the total area). Second, we assume that the target reference level is 30% of area protected.

The model for this goal considers the inland coastal zone (up to 1 km inland) independently from, and equally weighted with, the offshore coastal zone (up to 3 nm offshore). The status for this goal is calculated as:

$$X_{LSP} = \frac{\left(\frac{Area_{P}}{Area_{P_{ref}}} + \frac{Area_{MPA}}{Area_{MPA_{ref}}}\right)}{2}$$

where:

-   $Area_{P}$ = Protected area for inland 1 km buffer
-   ${Area_{P_{ref}}}$ = Reference value for inland protected area
-   $Area_{MPA}$ = Marine protected area for offshore 3 nm buffer
-   ${Area_{MPA_{ref}}}$ = Reference value for marine protected area within offshore 3 nm buffer
-   $Ref$ = 30% of total area within buffer zone is protected

------------------------------------------------------------------------

# Updates from previous assessment

v2024 Using updated June 2024 data. Switched `raster` functions over to their `terra` equivalents.

v2021 Using updated February 2021 data

------------------------------------------------------------------------

# Data Source

**Reference**: IUCN and UNEP-WCMC (2023), The World Database on Protected Areas (WDPA) [On-line], May 2024. Cambridge, UK: UNEP-WCMC. Available at: www.protectedplanet.net.

**Downloaded**: May 24, 2024

**Description**: Shapefile of World Database on Protected Areas

**Time range**: 1800 - 2023; some protected areas do not have an associated "status year" and are reported as year 0.

**Format**: Shapefile

**File location**: `Mazu:/home/shares/ohi/git-annex/globalprep/_raw_data/wdpa_mpa/d2024/WDPA_May2024_Public_shp`

------------------------------------------------------------------------

# Setup

```{r}
library(raster)
library(terra)
library(readr)
library(magrittr)
library(mregions2)
library(mapview)
library(sf)
library(tidyverse)
library(lwgeom)
library(here)
library(leaflet.extras2)

# ---- sources! ----
source(here("workflow", "R", "common.R")) # file creates objects to process data

# ---- set year and file path info ----
current_year <- 2024 # Update this in the future!!
version_year <- paste0("v",current_year)
data_dir_version_year <- paste0("d", current_year)

# ---- data directories ----

# raw data directory (on Mazu)
raw_data_dir <- here::here(dir_M, "git-annex", "globalprep", "_raw_data")

# WDPA raw data directory
wdpa_dir <- here(raw_data_dir, "wdpa_mpa", data_dir_version_year)

# output data dir for intermediate data products
int_dir <- here(oa_dir, "int")
# dir.create(int_dir) # to create the path on Mazu if it has not already been done

# final output dir
output_dir <- here("globalprep","prs_oa", version_year, "output")

# set colors
cols = rev(colorRampPalette(brewer.pal(9, 'Spectral'))(255)) # rainbow color scheme
wdpa <- 

# this CRS might be better for visualization, explore.
gulf_crs <- "+proj=aea +lat_1=23 +lat_2=30 +lat_0=25 +lon_0=-110 +datum=WGS84 +units=m +no_defs"
```


```{r}
eco_hr_latlon <- st_read(here(goc_spatial, "GoC_polygon_ecoregion_latlon.shp"))
mapview(eco_hr_latlon)

eco_hr_eqarea <- st_read(here(goc_spatial, "GoC_polygon_ecoregion_eqarea.shp"))
mapview(eco_hr_eqarea)
```

